# **Домашнее задание 1: Оптический поток и динамика видео**

### **Цель**

Освоить практическое применение оптического потока для анализа движения, научиться строить полные видеопайплайны, включающие вычисление потока, фильтрацию, warping и стабилизацию. Студент выбирает **одну** из двух инженерных задач: построение мини-системы **стабилизации камеры** или создание **трекинг-модуля движения**, анализирующего траектории и устойчивость методов Lucas–Kanade и Farnebäck.

---

# **Вариант A: Мини-система стабилизации камеры**

### **Задание**

1. Выбрать видеоролик с заметной дрожью камеры (телефонная съёмка, action-камера, GoPro, записанная вручную панорама).
2. Вычислить плотный оптический поток (Farnebäck) или разреженный (LK) и оценить глобальное движение камеры по кадрам (аффинная модель или гомография).
3. Сгладить траекторию движения низкочастотным фильтром (скользящее окно, экспоненциальное сглаживание или фильтр Калмана по желанию).
4. Выполнить **компенсацию движения** через warp каждого кадра к стабилизированной траектории.
5. Сформировать стабилизированное видео.
6. Построить визуальные сравнения «до/после» и провести **error analysis**: какие участки стабилизируются плохо и почему (оптический поток, тени, motion blur, нехватка текстуры, ошибки глобальной модели).

---

# **Вариант B: Учебная система анализа движения (трекинг-модуль)**

### **Задание**

1. Выбрать любой видеоролик с несколькими движущимися объектами.
2. Реализовать вычисление разреженного оптического потока (Lucas–Kanade) и плотного (Farnebäck).
3. Для LK:
   – найти ключевые точки;
   – отследить траектории по 50–200 кадрам;
   – визуализировать движение в координатной системе кадра.
4. Для Farnebäck:
   – построить поле движения;
   – выделить движущиеся объекты через модуль потока;
   – получить бинарные маски движения.
5. Сравнить чувствительность методов к текстуре, motion blur, теням, шуму.
6. Провести **качественный и количественный разбор ошибок**: где LK теряет точки, где плотный поток выдаёт шум, где маска движения фрагментируется.
7. Подготовить краткое исследование: по каким признакам студент выбирал бы LK или Farnebäck в реальной задаче.

---

# **Требования к сдаче**

Репозиторий на GitHub:

* `src/` или ноутбук с кодом вычисления оптического потока и всего пайплайна.
* `README.md` c описанием выбранного варианта (A или B), параметров, применённых фильтров и основных наблюдений.
* Визуализации:
  – для варианта A: примерные кадры «до/после», графики траектории движения камеры, примеры warping-а;
  – для варианта B: траектории LK, карты плотного потока, маски движения.
* При варианте A — итоговое стабилизированное видео.
* При варианте B — сравнительный отчёт о различиях LK и Farnebäck.

---

# **Критерии оценки**

| Баллы | Критерий                                                                      |
| ----- | ----------------------------------------------------------------------------- |
| 0–3   | Полнота: реализованы все этапы выбранного варианта (A или B).                 |
| 0–3   | Код: чистый, воспроизводимый, корректно использует OpenCV.                    |
| 0–2   | Анализ: качественный разбор ошибок, интерпретация результатов, выводы.        |
| 0–2   | Репозиторий: аккуратность, читаемость, примеры визуализаций, понятный README. |

**Максимум: 10 баллов.**

---
